<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="疯狂WA.仍然不知道为什么我是错的.   User1234567891011121314151617181920212223242526272829303132333435363738394041相同的差已知正整数x，y，z构成等差数列，使得方程x^2 − y^2 − z^2 &#x3D; n有两个解的最小正整数为n&#x3D;27： 34^2 − 27^2 − 20^2 &#x3D; 12^2 − 9^2 − 6^2 &#x3D; 2">
<meta property="og:type" content="website">
<meta property="og:title" content="pe-0135">
<meta property="og:url" content="https://narafluorine.github.io/project-euler/0135.html">
<meta property="og:site_name" content="Fluorine&#39;s blog">
<meta property="og:description" content="疯狂WA.仍然不知道为什么我是错的.   User1234567891011121314151617181920212223242526272829303132333435363738394041相同的差已知正整数x，y，z构成等差数列，使得方程x^2 − y^2 − z^2 &#x3D; n有两个解的最小正整数为n&#x3D;27： 34^2 − 27^2 − 20^2 &#x3D; 12^2 − 9^2 − 6^2 &#x3D; 2">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-12-17T03:45:14.000Z">
<meta property="article:modified_time" content="2025-12-16T23:52:02.313Z">
<meta property="article:author" content="Fluorine Wengers">
<meta property="article:tag" content="Math">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>pe-0135</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="Fluorine's blog" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
    <div class="content index py4 ">
        
          <header id="header">
  <a class="u-url u-uid" href="/">
  
    
      <img id="logo" alt class="u-logo" src="/images/logo.png" />
    
  
    <div id="title">
      <h1 class="p-name">Fluorine&#39;s blog</h1>
    </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#" aria-label="目录"><i class="fa-solid fa-bars fa-2x"></i></a>
      </li>
      <!--
     --><li><a href="/">首页</a></li><!--
   --><!--
     --><li><a href="/about/">关于</a></li><!--
   --><!--
     --><li><a href="/archives/">归档</a></li><!--
   --><!--
     --><li><a href="/tags/">标签</a></li><!--
   --><!--
     --><li><a href="/categories/">分类</a></li><!--
   --><!--
     --><li><a href="/search/">搜索</a></li><!--
   --><!--
     --><li><a href="/friends/">友链</a></li><!--
   --><!--
     --><li><a href="/QSL/">QSL</a></li><!--
   -->
    </ul>
  </div>
  <!--RSS-->
  <!-- {%- if theme.sidebar_rss %}
  <div class="">
    <a target="_blank" class="social-link" href="{{ url_for(theme.sidebar_rss.link) }}" style="color: {{ theme.sidebar_rss.color }};">
      <span class="icon">
        <i class="{{ theme.sidebar_rss.icon }}"></i>
      </span>
      <span class="label">{{ theme.sidebar_rss.text }}</span>
    </a>
  </div>
  {%- endif %} -->
  <!--RSS-->
</header>

        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

  <div class="content" itemprop="articleBody">
      
          <p>疯狂WA.<br>仍然不知道为什么我是错的.  </p>
<h2 id="User"><a href="#User" class="headerlink" title="User"></a>User</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">相同的差</span><br><span class="line"></span><br><span class="line">已知正整数x，y，z构成等差数列，使得方程x^2 − y^2 − z^2 = n有两个解的最小正整数为n=27： </span><br><span class="line"></span><br><span class="line">34^2 − 27^2 − 20^2 = 12^2 − 9^2 − 6^2 = 27 </span><br><span class="line">使得方程有十个解的最小正整数为n = 1155。</span><br><span class="line"></span><br><span class="line">在小于一百万的数中，有多少个n的取值使得方程恰好有十个不同的解？</span><br><span class="line"></span><br><span class="line">我想直接枚举,但是WA了...</span><br><span class="line"></span><br><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">using i64 = long long;</span><br><span class="line"></span><br><span class="line">const int LIM = 1000000;</span><br><span class="line">int tb[LIM+5];</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    for (i64 k = 1; k &lt;= LIM; k++) &#123;</span><br><span class="line">        for (i64 x = 1; x &lt;= 2*k; x++) &#123;</span><br><span class="line">            i64 n = 1* x * (4* k - x);</span><br><span class="line">			if(n&gt;=LIM)break;</span><br><span class="line">			tb[n]+=2;</span><br><span class="line">			if(x==2*k)tb[n]--;</span><br><span class="line">        &#125;</span><br><span class="line">//        if(k%10000==0)&#123;</span><br><span class="line">//        	cout&lt;&lt;&quot;! &quot;&lt;&lt;k&lt;&lt;&quot;\n&quot;;</span><br><span class="line">//        	cout.flush();</span><br><span class="line">//		&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    long long ans = 0;</span><br><span class="line">    for (int i = 1; i &lt; LIM; i++) &#123;</span><br><span class="line">        if (tb[i] == 10) ans++;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">怎么回事??</span><br></pre></td></tr></table></figure>
<h2 id="DeepSeek"><a href="#DeepSeek" class="headerlink" title="DeepSeek"></a>DeepSeek</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br></pre></td><td class="code"><pre><span class="line">我们来重新梳理一下这个问题。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## **1. 题意转换**</span><br><span class="line"></span><br><span class="line">已知 \(x, y, z\) 为正整数且成等差数列。</span><br><span class="line"></span><br><span class="line">设差为 \(d &gt; 0\)，那么有：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">y = x - d,\quad z = x - 2d</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">题目条件是：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">x^2 - y^2 - z^2 = n</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">代入：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">x^2 - (x-d)^2 - (x-2d)^2 = n</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">展开：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">x^2 - [x^2 - 2xd + d^2] - [x^2 - 4xd + 4d^2] = n</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">x^2 - x^2 + 2xd - d^2 - x^2 + 4xd - 4d^2 = n</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">(-x^2) + (6xd) - 5d^2 = n</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">整理：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">n = -x^2 + 6xd - 5d^2</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">这是关于 \(x\) 的二次式，也可用关于 \(d\) 的二次式更方便。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">我们交换视角：设中间项为 \(y\)，公差为 \(d\)，则：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">x = y+d, \quad z = y-d</span><br><span class="line">\]</span><br><span class="line">且 \(y &gt; d &gt; 0\)。</span><br><span class="line"></span><br><span class="line">代入：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">x^2 - y^2 - z^2</span><br><span class="line">= (y+d)^2 - y^2 - (y-d)^2</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">展开：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">= y^2 + 2yd + d^2 - y^2 - (y^2 - 2yd + d^2)</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">= 2yd + d^2 - y^2 + 2yd - d^2</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">合并同类项：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">(2yd + 2yd) + (d^2 - d^2) - y^2</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">= 4yd - y^2</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line">即：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">n = y^2 - 4yd? </span><br><span class="line">\]</span><br><span class="line">等一下，检查：</span><br><span class="line"></span><br><span class="line">第一项：\((y+d)^2 - y^2 - (y-d)^2\)  </span><br><span class="line">= \(y^2 + 2yd + d^2 - y^2 - (y^2 - 2yd + d^2)\)  </span><br><span class="line">= \(2yd + d^2 - y^2 + 2yd - d^2\)  </span><br><span class="line">= \(4yd - y^2\)  （这里 \(d^2 - d^2=0\)）</span><br><span class="line"></span><br><span class="line">所以 \(n = 4yd - y^2\)。  </span><br><span class="line">写作 \(n = y(4d - y)\)。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## **2. 正整数解条件**</span><br><span class="line"></span><br><span class="line">已知 \(y &gt; d &gt; 0\)，且 \(x = y+d &gt; 0\)，\(z = y-d &gt; 0 \implies y &gt; d\)。</span><br><span class="line"></span><br><span class="line">此外 \(x, y, z\) 为正整数，所以 \(y \ge d+1\)。</span><br><span class="line"></span><br><span class="line">我们设 \(t = y-d &gt; 0\)，则 \(y = d + t\)，于是：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">n = y(4d - y) = (d+t)(4d - (d+t)) = (d+t)(3d - t)</span><br><span class="line">\]</span><br><span class="line">且 \(t &gt; 0\)，\(d &gt; 0\)，并且 \(z = y-d = t &gt; 0\) 自然成立。  </span><br><span class="line">另外 \(x = y+d = d+t+d = 2d+t &gt; 0\) 自动成立。</span><br><span class="line"></span><br><span class="line">所以本质上我们只需要 \(d &gt; 0\)，\(t &gt; 0\)，且 \(t &lt; 3d\)（因为 \(3d - t &gt; 0\) 才能 \(n&gt;0\)）。</span><br><span class="line"></span><br><span class="line">于是每个正整数 \(n\) 可以表示为 \(n = (d+t)(3d - t)\)，其中 \(d, t\) 为正整数，且 \(t &lt; 3d\)。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## **3. 变量代换减少自由度**</span><br><span class="line"></span><br><span class="line">设 \(u = d+t\)，\(v = 3d - t\)，则：</span><br><span class="line"></span><br><span class="line">\[</span><br><span class="line">u + v = 4d \implies d = \frac&#123;u+v&#125;&#123;4&#125;</span><br><span class="line">\]</span><br><span class="line">\[</span><br><span class="line">u - v = (d+t) - (3d - t) = -2d + 2t \implies t = \frac&#123;u-v+2d&#125;&#123;2&#125; = \frac&#123;u-v + \frac&#123;u+v&#125;&#123;2&#125;&#125;&#123;?&#125;</span><br><span class="line">\]</span><br><span class="line">可以简化：直接由 \(u = d+t\)，\(v=3d-t\) 得  </span><br><span class="line">\(u+v = 4d\) 得 \(d = (u+v)/4\)，  </span><br><span class="line">\(u - v = -2d + 2t \implies 2t = u-v+2d = u-v + (u+v)/2 = (2u-2v + u+v)/2\)? 有点乱。</span><br><span class="line"></span><br><span class="line">我们回到原始条件：  </span><br><span class="line">\(u = d+t\)，\(v = 3d-t\)，且 \(t&gt;0\)，\(d&gt;0\)，\(t&lt;3d\)。</span><br><span class="line"></span><br><span class="line">由 \(t&lt;3d \iff t = u-d &lt; 3d \iff u &lt; 4d \iff u &lt; u+v \iff v &gt; 0\)，自动成立因为 \(v&gt;0\)。</span><br><span class="line"></span><br><span class="line">还有 \(t&gt;0 \iff u&gt;d \iff u &gt; (u+v)/4 \iff 4u &gt; u+v \iff 3u &gt; v\)。</span><br><span class="line"></span><br><span class="line">还有 \(d&gt;0 \iff u+v&gt;0\)，自动成立。</span><br><span class="line"></span><br><span class="line">所以约束条件是：\(u, v\) 为正整数，\(3u &gt; v\)，并且 \(u+v\) 是 4 的倍数（因为 \(d = (u+v)/4\) 为整数），并且 \(u-v\) 必须是偶数（因为 \(t = (u-v)/2 + d\) 需要为整数？）我们来检查整数性：</span><br><span class="line"></span><br><span class="line">由 \(d = (u+v)/4\) 为整数要求 \(u+v \equiv 0 \pmod&#123;4&#125;\)。</span><br><span class="line"></span><br><span class="line">然后 \(t = u - d = u - (u+v)/4 = (4u - u - v)/4 = (3u - v)/4\) 必须为正整数。所以 \((3u-v)\) 必须为正且被 4 整除。</span><br><span class="line"></span><br><span class="line">所以我们得到简洁条件：</span><br><span class="line"></span><br><span class="line">- \(u, v\) 正整数</span><br><span class="line">- \(u+v \equiv 0 \pmod&#123;4&#125;\)</span><br><span class="line">- \(3u &gt; v\)</span><br><span class="line">- \(3u - v \equiv 0 \pmod&#123;4&#125;\)</span><br><span class="line"></span><br><span class="line">这时 \(n = uv\)。</span><br><span class="line"></span><br><span class="line">每个 \((u,v)\) 对应一组 \((d,t)\)，从而对应一组等差数列 \((x,y,z)\)：</span><br><span class="line"></span><br><span class="line">\(d = (u+v)/4\)，  </span><br><span class="line">\(t = (3u-v)/4\)，  </span><br><span class="line">\(y = d+t = u\)，  </span><br><span class="line">\(x = y+d = u + (u+v)/4 = \frac&#123;4u+u+v&#125;&#123;4&#125; = \frac&#123;5u+v&#125;&#123;4&#125;\)，  </span><br><span class="line">\(z = y-d = u - (u+v)/4 = \frac&#123;4u - u - v&#125;&#123;4&#125; = \frac&#123;3u - v&#125;&#123;4&#125;\)。</span><br><span class="line"></span><br><span class="line">所以这三个数都是正整数（由上面模条件）。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## **4. 枚举计数方法**</span><br><span class="line"></span><br><span class="line">问题：对于固定的 \(n\)，找到 \((u,v)\) 正整数使得：</span><br><span class="line">1. \(uv = n\)</span><br><span class="line">2. \(u+v \equiv 0 \pmod&#123;4&#125;\)</span><br><span class="line">3. \(3u &gt; v\)</span><br><span class="line">4. \(3u - v \equiv 0 \pmod&#123;4&#125;\)</span><br><span class="line"></span><br><span class="line">条件 4 可以由条件 2 推导出来吗？检验：若 \(u+v\) 是 4 的倍数，那么 \(3u-v = 4u - (u+v)\)，由于 \(4u\) 是 4 的倍数，\(u+v\) 是 4 的倍数，所以差 \(3u-v\) 也是 4 的倍数。所以条件 4 自动成立。</span><br><span class="line"></span><br><span class="line">另外由 \(3u&gt;v\) 与 \(v=n/u\)，得 \(3u &gt; n/u \implies 3u^2 &gt; n\)。</span><br><span class="line"></span><br><span class="line">所以对于每个 \(u\) 整除 \(n\)，令 \(v = n/u\)，我们要求：</span><br><span class="line">- \(u+v \equiv 0 \pmod&#123;4&#125;\)</span><br><span class="line">- \(3u &gt; v\)（且 \(u \le v\) 可能会有对称重复？）</span><br><span class="line"></span><br><span class="line">注意：\((u,v)\) 与 \((v,u)\) 在 \(n\) 相同的情况下不同，但会给出相同的等差数列吗？我们要检验。</span><br><span class="line"></span><br><span class="line">若交换 \(u, v\)，那么新的 \(u&#x27; = v, v&#x27; = u\)，条件 \(3u&#x27;&gt;v&#x27;\) 变成 \(3v &gt; u\)，不一定与原条件等价，所以 \((u,v)\) 与 \((v,u)\) 是两个不同的解（当两者都满足各自条件时），但会不会对应同一组 \((x,y,z)\)？</span><br><span class="line"></span><br><span class="line">计算一下：  </span><br><span class="line">对 \((u,v)\) 得到：</span><br><span class="line">\(x_1 = (5u+v)/4\)，  </span><br><span class="line">\(y_1 = u\)，  </span><br><span class="line">\(z_1 = (3u-v)/4\)。</span><br><span class="line"></span><br><span class="line">对 \((v,u)\) 得到：</span><br><span class="line">\(x_2 = (5v+u)/4\)，  </span><br><span class="line">\(y_2 = v\)，  </span><br><span class="line">\(z_2 = (3v-u)/4\)。</span><br><span class="line"></span><br><span class="line">一般来说不相同（除非 \(u=v\)）。但等差数列由 \(x,y,z\) 顺序固定，而这里 \((x_1,y_1,z_1)\) 与 \((x_2,y_2,z_2)\) 不一定是同一组三个数（排序后），所以是不同的解。</span><br><span class="line"></span><br><span class="line">因此我们要数 **有序** \((u,v)\) 正整数对，\(uv=n\)，满足：</span><br><span class="line">- \(u+v \equiv 0 \pmod&#123;4&#125;\)</span><br><span class="line">- \(3u &gt; v\)</span><br><span class="line"></span><br><span class="line">这等价于 \(u^2 &lt; n &lt; 3u^2\) 且 \(u+v \equiv 0 \pmod&#123;4&#125;\)。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## **5. 等价约束**</span><br><span class="line"></span><br><span class="line">\(u+v \equiv 0 \pmod&#123;4&#125; \iff u + n/u \equiv 0 \pmod&#123;4&#125;\)。</span><br><span class="line"></span><br><span class="line">设 \(u \equiv a \pmod&#123;4&#125;\)，\(n/u \equiv b \pmod&#123;4&#125;\)，则 \(a+b \equiv 0 \pmod&#123;4&#125;\)，且 \(ab \equiv n \pmod&#123;4&#125;\)。</span><br><span class="line"></span><br><span class="line">所以 \(a\) 与 \(n/a \pmod&#123;4&#125;\) 和为 0 模 4。  </span><br><span class="line">对于给定的 \(n\)，枚举它的因子 \(u\)，检查这两个条件。</span><br><span class="line"></span><br><span class="line">另外 \(v = n/u\)，条件 \(3u&gt;v\) 即 \(3u &gt; n/u \implies u^2 &gt; n/3\) 且 \(u^2 &lt; n\)？不对，应该是 \(u^2 &lt; 3n\)？我们仔细看：</span><br><span class="line"></span><br><span class="line">\(3u &gt; v = n/u \implies 3u^2 &gt; n \implies u^2 &gt; n/3\)。</span><br><span class="line"></span><br><span class="line">还有 \(u\) 是因子，所以 \(u \le n\)，自动满足。</span><br><span class="line"></span><br><span class="line">但还有一个隐含条件：\(t&gt;0\) 等价于 \(3u&gt;v\)，已经包含了。同时 \(z = (3u-v)/4 &gt;0\) 也即 \(3u&gt;v\)。所以只要 \(3u&gt;v\) 即可。</span><br><span class="line"></span><br><span class="line">另外， \(x = (5u+v)/4 &gt; y = u \iff 5u+v &gt; 4u \iff u+v &gt; 0\) 自动成立。  </span><br><span class="line">\(y = u &gt; z = (3u-v)/4 \iff 4u &gt; 3u - v \iff u &gt; -v\) 自动成立（都是正数）。  </span><br><span class="line">且 \(z&gt;0\) 已经由 \(3u&gt;v\) 保证。</span><br><span class="line"></span><br><span class="line">所以唯一条件是：</span><br><span class="line">1. \(u \mid n\)</span><br><span class="line">2. \(u + n/u \equiv 0 \pmod&#123;4&#125;\)</span><br><span class="line">3. \(u^2 &gt; n/3\)</span><br><span class="line"></span><br><span class="line">注意：对称对 \((u,v)\) 和 \((v,u)\) 可能会被双重计数，当两者都满足 \(3u&gt;v\) 和 \(3v&gt;u\) 时。那意味着：</span><br><span class="line">\(u^2 &gt; n/3\) 且 \(v^2 = n^2/u^2 &gt; n/3 \implies n^2/u^2 &gt; n/3 \implies n/u^2 &gt; 1/3 \implies u^2 &lt; 3n\) 且 \(u^2 &gt; n/3\) 且 \(v^2 &gt; n/3\)（对另一个也成立），这等价于 \(n/3 &lt; u^2 &lt; 3n\)。</span><br><span class="line"></span><br><span class="line">对于 \(u \neq v\)，即 \(u^2 \neq n\)，区间 \((n/3, 3n)\) 包含 \(n\)，所以当 \(u^2\) 在 \((n/3, n)\) 时，\(v^2 = n^2/u^2\) 在 \((n, 3n)\)，所以它们在不同区间，不会同时满足 \(3u&gt;v\) 和 \(3v&gt;u\)？检查：  </span><br><span class="line">若 \(u^2 &lt; n\)，则 \(v = n/u &gt; u\)，那么 \(3u &gt; v\) 成立？不一定，因为 \(v\) 可以大于 \(3u\)。  </span><br><span class="line">实际上 \(3u&gt;v\) 即 \(3u &gt; n/u \iff u^2 &gt; n/3\)。  </span><br><span class="line">而 \(3v&gt;u\) 即 \(3n/u &gt; u \iff u^2 &lt; 3n\)。</span><br><span class="line"></span><br><span class="line">所以两个同时成立就是 \(n/3 &lt; u^2 &lt; 3n\)。  </span><br><span class="line">\(u^2 = n\) 时，\(3u&gt;u\) 成立（相等？不，当 \(u=v\) 时 \(3u = 3v\) 对 \(3u&gt;v\) 就是 \(3u&gt;u\) 成立），允许，但 \(u=v\) 只算一次。</span><br><span class="line"></span><br><span class="line">所以我们只需对每个 \(u\) 因子检查 \(u^2 &gt; n/3\)，然后计数，这自动包含 \(u \le v\) 或 \(u \ge v\) 的处理，因为 \(u\) 遍历所有因子，所以每个解被计数一次（对应一个 \(u\)，不是对 \((u,v)\) 对称两个）。</span><br><span class="line"></span><br><span class="line">因为若 \(u &lt; v\) 且 \(3u&gt;v\)，那么 \(u^2 &gt; n/3\)，若 \(u&gt;v\) 且 \(3u&gt;v\)（不可能，因为 \(u&gt;v\) 则 \(3u&gt;v\) 必然成立，但 \(u&gt;v\) 意味着 \(u^2 &gt; n\)，\(u^2 &gt; n/3\) 也成立），但这样 \((v,u)\) 会作为另一个因子对计数？我们要小心。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">更好方法：对每个因子 \(u\) 满足 \(u^2 &gt; n/3\) 且 \(u + n/u \equiv 0 \pmod&#123;4&#125;\)，计数一次。这样就不会重复（因子对有序）。但是否会漏掉 \(u^2 \le n/3\) 的解？</span><br><span class="line"></span><br><span class="line">若 \(u^2 \le n/3\)，则 \(3u \le n/u\)，不满足 \(3u&gt;v\)，故无解。所以就是要求 \(u^2 &gt; n/3\)。</span><br><span class="line"></span><br><span class="line">于是最终：  </span><br><span class="line">**对每个 \(n\)，解的个数 = 满足下列条件的因子 \(u\) 的个数：**</span><br><span class="line">- \(u \mid n\)</span><br><span class="line">- \(u + n/u \equiv 0 \pmod&#123;4&#125;\)</span><br><span class="line">- \(u^2 &gt; n/3\)</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## **6. 你的代码分析**</span><br><span class="line"></span><br><span class="line">你的代码变量：  </span><br><span class="line">`k` 是什么？似乎是设 \(x = 2k\) 吗？仔细看：</span><br><span class="line"></span><br><span class="line">你写：</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i64 k = <span class="number">1</span>; k &lt;= LIM; k++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (i64 x = <span class="number">1</span>; x &lt;= <span class="number">2</span>*k; x++) &#123;</span><br><span class="line">        i64 n = <span class="number">1</span>* x * (<span class="number">4</span>* k - x);</span><br><span class="line">        <span class="keyword">if</span>(n&gt;=LIM)<span class="keyword">break</span>;</span><br><span class="line">        tb[n]+=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="number">2</span>*k)tb[n]--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">这里 \(n = x(4k-x)\)，这和 \(n = y(4d-y)\) 对比：  </span><br><span class="line">我们之前 \(n = y(4d - y)\)，令 \(y\) 为中间项，\(d\) 公差。</span><br><span class="line"></span><br><span class="line">但这里 \(k\) 是什么？假设 \(k = d\)（公差），那么 \(n = y(4d-y)\)。你设 \(x = y\)，则 \(n = x(4k-x)\)，但 \(x\) 从 1 到 \(2k\)？  </span><br><span class="line"></span><br><span class="line">因为 \(x = y = d+t\)，\(t&gt;0\) 要求 \(y&gt;d\)，即 \(x&gt;k\)，且 \(t&lt;3d \implies y&lt;4d\) 即 \(x&lt;4k\)。</span><br><span class="line"></span><br><span class="line">\(y&gt;d\) 即 \(x&gt;k\)，所以范围是 \(k &lt; x &lt; 4k\)。  </span><br><span class="line"></span><br><span class="line">而你的 \(x\) 从 1 到 \(2k\)，这和 \(x&gt;k\) 对上了 \(x=k+1,\dots,2k,\dots\) 但你的上限是 \(2k\)，然而实际 \(x\) 可达 \(4k-1\)（因为 \(y&lt;4d\) 且 \(y&gt;d\) 正整数）。上限 \(2k\) 似乎太小，会漏解。</span><br><span class="line"></span><br><span class="line">另外你 `if(x==2*k)tb[n]--`，可能是避免重复计数对称？但公式可能错了。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">**主要问题：** 你只枚举了 \(x\) 到 \(2k\)，但 \(x\) 最大可以接近 \(4k-1\)（当 \(t\) 略小于 \(3d\) 时）。所以漏了许多解。</span><br><span class="line"></span><br><span class="line">这解释为什么 WA。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## **7. 正确枚举方法（直接法）**</span><br><span class="line"></span><br><span class="line">我们枚举 \(d\) 和 \(t\)，\(n = (d+t)(3d-t)\)，且 \(t&gt;0\)，\(3d&gt;t\)。</span><br><span class="line"></span><br><span class="line">这样 \(n &lt; 10^6\) 限制下，\(d\) 可以到多少？  </span><br><span class="line">当 \(d\) 固定，\(t\) 从 1 到 \(3d-1\)，\(n = (d+t)(3d-t) = -t^2 + 2dt + 3d^2\)，对于 \(t\) 是二次函数，最大值在 \(t=d\) 时，值为 \( (d+d)(3d-d) = 2d \cdot 2d = 4d^2\)。</span><br><span class="line"></span><br><span class="line">所以 \(4d^2 \le 10^6 \implies d \le 500\)。  </span><br><span class="line"></span><br><span class="line">实际上 \(t\) 接近 1 或 \(3d-1\) 时 \(n\) 较小，但为覆盖所有 \(n&lt;10^6\)， \(d\) 的上界可能是更大的，但最大值 \(n\) 不超过 \(4d^2\)，所以如果我们要 \(n&lt;10^6\)，那么 \(4d^2 &lt; 10^6 \implies d &lt; 500\)。但 \(t\) 变化可能使某些 \(d&gt;500\) 也产生 \(n&lt;10^6\)（比如 \(t\) 接近 \(3d\) 时 \(n\) 很小），所以不能只限制 \(d\) 到 500。</span><br><span class="line"></span><br><span class="line">但 \(d&gt;500\) 时，\(n = (d+t)(3d-t) \ge (d+1)(3d-1)\) 也很大？如果 \(t=1\)，\(n = (d+1)(3d-1) \approx 3d^2\)，需要 \(3d^2 &lt; 10^6 \implies d &lt; 577.35\)。所以最大 \(d\) 约 577。</span><br><span class="line"></span><br><span class="line">但再检查：\(t\) 接近 \(3d\) 时，比如 \(t=3d-1\)，\(n=(d+3d-1)(3d-3d+1)=(4d-1)(1) = 4d-1\)，即使 \(d\) 很大，这个 \(n\) 也可能小于 \(10^6\)。所以 \(d\) 可以很大，比如 \(d=10^6\)，\(t=3d-1\)，\(n=4d-1=4\times 10^6-1&gt;10^6\)？不，此时 \(d+t=4d-1 \approx 4\times 10^6\)，乘 \(3d-t=1\)，确实 \(n\) 很大？不对，我算错了：</span><br><span class="line"></span><br><span class="line">\(t=3d-1\)：  </span><br><span class="line">\(d+t = d+3d-1 = 4d-1\)，  </span><br><span class="line">\(3d-t = 3d-(3d-1)=1\)，  </span><br><span class="line">所以 \(n=4d-1\)。对的，当 \(d=250000\)，\(n\approx 10^6\)，所以 \(d\) 最大可达 250000？但我们要 \(n&lt;10^6\)，所以 \(d \le 250000\) 左右。</span><br><span class="line"></span><br><span class="line">但这会导致枚举 \(d\) 从 1 到 250000，内层 \(t\) 从 1 到 \(3d-1\)，总循环量太大（\(O(d^2)\) 大约 \(10^&#123;11&#125;\)），不行。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">所以得用因子枚举法：  </span><br><span class="line">固定 \(n\)，找它的因子分解，数出满足条件的 \(u\) 的个数，判断是否等于 10。</span><br><span class="line"></span><br><span class="line">于是我们只需对每个 \(n&lt;10^6\)，计算它的因子并检查条件。</span><br><span class="line"></span><br><span class="line">可以优化：枚举 \(u\) 从 1 到 \(10^6\)，对每个 \(u\) 枚举 \(v\) 使得 \(uv \le 10^6\)，同时 \(u+v\) 是 4 的倍数，且 \(3u&gt;v\)（等价于 \(u^2 &gt; uv/3 = n/3\)），用数组计数 `cnt[n]++`。</span><br><span class="line"></span><br><span class="line">这样复杂度：对每个 \(u\)，\(v\) 从 \(u\) 开始（否则重复），且满足 \(u+v \equiv 0 \pmod&#123;4&#125;\)，所以 \(v\) 从 \( (4 - u\bmod 4) \bmod 4 \) 的某个起点，步长 4。  </span><br><span class="line">且 \(v \ge u\)（避免重复因子对 \((u,v)\) 与 \((v,u)\) 双重计数？但这里我们是把 \(u\) 看作 \(y\)，\(y\) 可以小于 \(v\) 吗？实际上 \(u=y\)，\(v=4d-y\)，没有明显要求 \(u\le v\)，只是我们枚举因子对时不限制 \(u\le v\)，会重复吗？</span><br><span class="line"></span><br><span class="line">看公式 \(n = uv\)，同一个 \(n\) 会有 \(u\) 和 \(v\) 都当作 \(y\) 的情况？但 \(y\) 是中间项，没有顺序限制，所以每个因子 \(u\) 对应一个解，无论 \(u\) 与 \(v\) 大小。所以我们枚举所有因子 \(u\)（遍历所有 \(u\)）即可，无需避免对称重复，但也不重复计算，因为一个 \(u\) 一个解。</span><br><span class="line"></span><br><span class="line">于是我们可以：</span><br><span class="line">1. 初始化 `cnt[n]=0` for all n。</span><br><span class="line">2. 对于 \(u\) 从 1 到 \(10^6\)，对于 \(v\) 使得 \(uv \le 10^6\) 且 \(u+v\) 是 4 的倍数 且 \(3u&gt;v\)：</span><br><span class="line">   - `cnt[uv]++`。</span><br><span class="line"></span><br><span class="line">复杂度：对每个 \(u\)，\(v\) 的步长为 4，且 \(v &lt; 3u\) 且 \(uv \le 10^6\)，所以 \(v \le \min(3u-1, 10^6/u)\)。  </span><br><span class="line">这个循环次数大致 \(\sum_&#123;u=1&#125;^&#123;10^6&#125; \frac&#123;\min(3u, 10^6/u)&#125;&#123;4&#125;\)，这是可以计算的，大约几百万次，可行。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">## **8. 实现这个方案**</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> LIM = <span class="number">1000000</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">cnt</span><span class="params">(LIM+<span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> u = <span class="number">1</span>; u &lt;= LIM; ++u) &#123;</span><br><span class="line">        <span class="comment">// 要求 u+v 是 4 的倍数，即 v ≡ (-u) mod 4</span></span><br><span class="line">        <span class="type">int</span> r = (<span class="number">4</span> - (u % <span class="number">4</span>)) % <span class="number">4</span>; <span class="comment">// v % 4 == r</span></span><br><span class="line">        <span class="type">int</span> max_v = <span class="built_in">min</span>(<span class="number">3</span>*u - <span class="number">1</span>, LIM / u);  <span class="comment">// v &lt; 3u 且 uv &lt;= LIM</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> v = r; v &lt;= max_v; v += <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v &lt;= <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">int</span> n = u * v;</span><br><span class="line">            <span class="keyword">if</span> (n &gt; LIM) <span class="keyword">break</span>;</span><br><span class="line">            cnt[n]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> n = <span class="number">1</span>; n &lt;= LIM; ++n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cnt[n] == <span class="number">10</span>) ans++;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"></span><br><span class="line">**注意**：这计算的是每个 \(n\) 的解数，即满足条件的 \((u,v)\) 对数量，每个 \(u\) 对应一个等差数列解。</span><br><span class="line"></span><br><span class="line">运行这个程序，应该会得到正确答案（根据题目例子，n=1155 时有 10 个解，我们这里计算的就是这样的 \(n\) 的个数）。</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## **9. 最终答案**</span><br><span class="line"></span><br><span class="line">运行后（我推理不实际运行），答案是 **？？**（需要运行程序得到数值）。</span><br><span class="line"></span><br><span class="line">根据 Project Euler 类似题（Problem 135），此题的答案（n&lt;1e6 恰好 10 个解的数量）是 **4989**（但我不确定这是否是本题答案，因为题目例子中 n=1155 有 10 解，与 PE135 一致，而 PE135 问的是恰好 10 个解的数量，在 1e6 以下，答案是 4989）。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">**最终建议**：使用上面修正后的代码，直接枚举 \(u\) 和 \(v\)，就能得到正确结果。你的原始错误在于枚举范围不完整。</span><br></pre></td></tr></table></figure>
<h2 id="fun-fact"><a href="#fun-fact" class="headerlink" title="fun fact"></a>fun fact</h2><p>GPT两发全挂(降智之后的),FluWA了三发,不知道为什么.</p>

        
  </div>
</article>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2024-2026
    Fluorine Wengers
  </div>
  <!-- 不蒜子统计 -->
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  <!-- 不蒜子统计 -->
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/about/">关于</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     --><!--
       --><li><a href="/tags/">标签</a></li><!--
     --><!--
       --><li><a href="/categories/">分类</a></li><!--
     --><!--
       --><li><a href="/search/">搜索</a></li><!--
     --><!--
       --><li><a href="/friends/">友链</a></li><!--
     --><!--
       --><li><a href="/QSL/">QSL</a></li><!--
     -->
      </ul>
    </nav>
  </div>
    <!-- Giscus 评论系统 -->
  <!-- <script src="https://giscus.app/client.js"
        data-repo="narafluorine/narafluorine.github.io"
        data-repo-id="[在此输入仓库 ID]"
        data-category="[在此输入分类名]"
        data-category-id="[在此输入分类 ID]"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="dark"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
    </script> -->
    <!-- Giscus 评论系统 -->

</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
